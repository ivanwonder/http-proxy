<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
  </head>
  <body>
    <ul>
      <li>port : <input id="port"></li>
      <li>proxy port : <input id="proxy_port"></li>
      <li>youtube proxy port : <input id="youtube_proxy_port"></li>
      <input type="button" value="create proxy server" id="createServer">
      <p id="error" style="color: red; display:none"></p>
    </ul>
    <script>
      document.getElementById('createServer').addEventListener('click', function () {
        const ipcRender = require('electron').ipcRenderer
        ipcRender.send('createServer', {
          port: document.getElementById('port').value || 9393,
          proxyPort: document.getElementById('proxy_port').value || 1080,
          youtubeProxyPort: document.getElementById('youtube_proxy_port').value || 1080
        })
        ipcRender.on('message', function (event, message) {
          let err = document.getElementById('error')
          if (message.error) {
            err.innerHTML = message.error
            err.style.display = ''
          }

          if (message.success) {
            err.style.display = 'none'
          }

          if (message.debug) {
            console.log(message.debug)
          }
        })
      })
    </script>
  </body>
</html>